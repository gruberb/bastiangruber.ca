(()=>{function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}var i=function(){function t(){e(this,t),this.mobileMenuBtn=document.getElementById("mobileMenuBtn"),this.mobileNav=document.getElementById("mobileNav"),this.body=document.body,this.isOpen=!1,this.init()}return n(t,[{key:"init",value:function(){var e=this;if(this.mobileMenuBtn&&this.mobileNav){this.mobileMenuBtn.addEventListener("click",(function(t){return e.toggleMenu(t)}));var t=document.getElementById("mobileNavClose");t&&t.addEventListener("click",(function(){return e.closeMenu()})),this.mobileNav.querySelectorAll("a").forEach((function(t){t.addEventListener("click",(function(){return e.closeMenu()}))})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.isOpen&&e.closeMenu()})),this.mobileNav.addEventListener("click",(function(t){t.target===e.mobileNav&&e.closeMenu()})),window.addEventListener("resize",(function(){window.innerWidth>768&&e.isOpen&&e.closeMenu()}))}}},{key:"toggleMenu",value:function(e){e.preventDefault(),e.stopPropagation(),this.isOpen?this.closeMenu():this.openMenu()}},{key:"openMenu",value:function(){this.isOpen=!0,this.mobileMenuBtn.classList.add("active"),this.mobileNav.classList.add("active"),this.body.classList.add("mobile-menu-open"),document.documentElement.classList.add("mobile-menu-open")}},{key:"closeMenu",value:function(){this.isOpen=!1,this.mobileMenuBtn.classList.remove("active"),this.mobileNav.classList.remove("active"),this.body.classList.remove("mobile-menu-open"),document.documentElement.classList.remove("mobile-menu-open")}}]),t}(),o=function(){function t(){e(this,t),this.progressBar=document.getElementById("reading-progress-bar"),this.init()}return n(t,[{key:"init",value:function(){var e=this;this.progressBar&&document.body.classList.contains("post-page")&&(window.addEventListener("scroll",(function(){return e.updateProgress()})),window.addEventListener("resize",(function(){return e.updateProgress()})))}},{key:"updateProgress",value:function(){var e=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;this.progressBar.style.width=Math.min(e,100)+"%"}}]),t}(),s=function(){function t(){e(this,t),this.tocContainer=document.getElementById("table-of-contents"),this.tocList=document.getElementById("toc-list"),this.tocToggle=document.getElementById("toc-toggle"),this.headings=[],this.currentActive=null,this.isMobileOpen=!1,this.isScrolling=!1,this.init()}return n(t,[{key:"init",value:function(){this.tocContainer&&document.body.classList.contains("post-page")&&(this.generateTOC(),this.setupScrollSpy(),this.setupMobileToggle())}},{key:"generateTOC",value:function(){var e=this,t=document.querySelectorAll(".main h1, .main h2");if(0===t.length)return this.tocContainer.style.display="none",void(this.tocToggle&&(this.tocToggle.style.display="none"));t.forEach((function(t,n){t.id||(t.id="heading-".concat(n)),e.headings.push({element:t,id:t.id,text:t.textContent,level:t.tagName.toLowerCase()});var i=document.createElement("li");i.classList.add("toc-item","toc-".concat(t.tagName.toLowerCase()));var o=document.createElement("a");o.classList.add("toc-link","toc-".concat(t.tagName.toLowerCase())),o.href="#".concat(t.id),o.textContent=t.textContent,o.addEventListener("click",(function(n){n.preventDefault(),e.isScrolling||(e.isScrolling=!0,e.scrollToHeading(t),window.innerWidth<1200&&e.closeMobileTOC(),setTimeout((function(){e.isScrolling=!1}),800))})),i.appendChild(o),e.tocList.appendChild(i)}))}},{key:"setupMobileToggle",value:function(){var e=this;this.tocToggle&&(this.tocToggle.addEventListener("click",(function(){e.toggleMobileTOC()})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.isMobileOpen&&e.closeMobileTOC()})),document.addEventListener("click",(function(t){!e.isMobileOpen||e.tocContainer.contains(t.target)||e.tocToggle.contains(t.target)||e.closeMobileTOC()})))}},{key:"toggleMobileTOC",value:function(){this.isMobileOpen?this.closeMobileTOC():this.openMobileTOC()}},{key:"openMobileTOC",value:function(){this.isMobileOpen=!0,this.tocContainer.classList.add("open"),this.tocToggle.classList.add("open")}},{key:"closeMobileTOC",value:function(){this.isMobileOpen=!1,this.tocContainer.classList.remove("open"),this.tocToggle.classList.remove("open")}},{key:"scrollToHeading",value:function(e){var t,n=this,i=((null===(t=document.querySelector(".header"))||void 0===t?void 0:t.offsetHeight)||0)+4+20,o=e.offsetTop-i;window.scrollTo({top:Math.max(0,o),behavior:"smooth"}),setTimeout((function(){n.setActiveHeading(e.id)}),300)}},{key:"setupScrollSpy",value:function(){var e=this;if(0!==this.headings.length){var t=!1,n=function(){for(var n,i,o=window.pageYOffset,s=((null===(n=document.querySelector(".header"))||void 0===n?void 0:n.offsetHeight)||0)+50,c=null,l=e.headings.length-1;l>=0;l--){var a=e.headings[l];if(o+s>=a.element.offsetTop){c=a.id;break}}!c&&o<100&&(c=null===(i=e.headings[0])||void 0===i?void 0:i.id),c&&e.setActiveHeading(c),t=!1};window.addEventListener("scroll",(function(){t||(requestAnimationFrame(n),t=!0)})),n()}}},{key:"setActiveHeading",value:function(e){this.currentActive&&this.currentActive.classList.remove("active");var t=this.tocList.querySelector('a[href="#'.concat(e,'"]'));t&&(t.classList.add("active"),this.currentActive=t)}}]),t}();document.addEventListener("DOMContentLoaded",(function(){new i,new o,new s})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll('a[href^="#"]').forEach((function(e){e.addEventListener("click",(function(t){var n=e.getAttribute("href");if("#"!==n){var i=document.querySelector(n);i&&(t.preventDefault(),i.scrollIntoView({behavior:"smooth",block:"start"}))}}))}))}))})();