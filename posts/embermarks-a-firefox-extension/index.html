<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://bastiangruber.ca/posts/embermarks-a-firefox-extension/"><link rel="alternate" type="application/rss+xml" href="/feed.xml" title="Feed"><link href="/assets/main.8f94dd5e915ce3ed79ea.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600;700&family=IBM+Plex+Mono:wght@300;400;500;600&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&display=swap" rel="stylesheet"><title>Embermarks - A Firefox Extension</title><link rel="icon" type="image/png" href="/images/favicons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/svg+xml" href="/images/favicons/favicon.svg"><link rel="shortcut icon" href="/images/favicons/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png"><link rel="manifest" href="/images/favicons/site.webmanifest"><link rel="me" href="https://hachyderm.io/@bastian"><script defer="defer" data-domain="bastiangruber.ca" src="https://analytics.novanexus.ca/js/script.js"></script><meta property="og:title" content="Embermarks - A Firefox Extension"><meta property="og:site_name" content="Bastian Gruber"><meta property="og:type" content="website"><meta property="og:url" content="https://bastiangruber.ca/posts/embermarks-a-firefox-extension/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@recvonline"><meta name="description" content="Rediscover your forgotten bookmarks"><meta property="og:description" content="Rediscover your forgotten bookmarks"><meta name="description" content="Rediscover your forgotten bookmarks"><meta property="og:image" content="https://bastiangruber.ca/images/default-social-image.png"><meta name="twitter:image" content="https://bastiangruber.ca/images/default-social-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script></head><body class="post-page"><div class="reading-progress"><div class="reading-progress-bar" id="reading-progress-bar"></div></div><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">Bastian Gruber</a></h1><nav class="nav desktop-nav"><ul class="nav__list"><li class="nav-item"><a href="/blog/">Blog</a></li><li class="nav-item"><a href="/talks">Talks &amp; Interviews</a></li><li class="nav-item"><a href="/projects">Side Projects</a></li><li class="nav-item"><a href="/about">About</a></li></ul></nav><button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle mobile menu"><span class="hamburger-line"></span> <span class="hamburger-line"></span> <span class="hamburger-line"></span></button><nav class="mobile-nav" id="mobileNav"><div class="mobile-nav-close" id="mobileNavClose"></div><ul class="mobile-nav__list"><li class="mobile-nav-item"><a href="/blog/">Blog</a></li><li class="mobile-nav-item"><a href="/talks">Talks &amp; Interviews</a></li><li class="mobile-nav-item"><a href="/projects">Side Projects</a></li><li class="mobile-nav-item"><a href="/about">About</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>Embermarks - A Firefox Extension</h1><div class="post__details"><time datetime="2026-01-09">09 Jan 2026 </time><span>| </span><span>4 min read</span></div></header><main class="post__content"><p>I created a Firefox Extensions!! It is called <a href="https://addons.mozilla.org/en-US/firefox/addon/embermarks1/">Embermarks</a> and it should help you discovering old and and/or forgotten bookmarks. It is also <a href="https://github.com/gruberb/embermarks">open source</a>.</p><p>And this is what it looks like:</p><table><tr><td><img src="/images/embermarks-popup.png" width="300" alt="Embermarks popup"></td><td><img src="/images/embermarks-settings.png" width="300" alt="Embermarks settings"></td></tr><tr><td align="center"><em>Popup</em></td><td align="center"><em>Settings</em></td></tr></table><h3>Why I created it</h3><p>Part of my routine in December to clean up my digital landscape (I <a href="https://bastiangruber.ca/posts/mass-quitting-apple/">left Apple Services</a> and <a href="https://bastiangruber.ca/posts/how-i-browse-the-web-in-2026/">re-setup my Firefox profiles</a>), is to really clean up and just take with me into the new year which I actually (use | read | consume | need).</p><p>Bookmarks was another one. I am usually quite organized when it comes to my bookmarks, and store every article or things I want to read or watch in my <a href="https://www.are.na/bastian-foreach-me-com/channels">Are.na account</a>. But, one of the folders I have is &quot;Exercises&quot;. Websites I store which hopefully improve my skills. For example:</p><ul><li><a href="https://protohackers.com">Protohackers</a></li><li><a href="https://www.saminiir.com/lets-code-tcp-ip-stack-1-ethernet-arp/">Let's code a TCP/IP stack</a></li><li><a href="https://cryptopals.com/">Cryptopals</a></li></ul><p>Besides that, I sometimes bookmark YouTube channels instead of subscribing to them. They pollute my &quot;Subscription&quot; view with videos I usually don't consume, but a few times a year, I need recommendations or get inspired, and then I go to these channels and &quot;browse&quot;.</p><p>A year is busy, so I forget to actually go to these websites. And for some websites -real gems - I totally forgot I had them bookmarked. Hence, my next little side project: <a href="https://addons.mozilla.org/en-US/firefox/addon/embermarks1/">Embermarks</a>.</p><p>I always created my own little Firefox extensions in the past - whenver a website annoys me or I needed something quick, and needed JS code do something for me, I put it in a Firefox extension and feel so proud and powerful. This time around though, I wanted to do something &quot;official&quot; and publish it to <a href="https://addons.mozilla.org/en-CA/firefox/">Firefox Addons</a>.</p><p>I never really thought about how to properly create an extension, just quick and dirty. So here is a recipe for my future self in case I forget again what to do.</p><h2>1. Starting a Firefox Extension Project</h2><p>What files do you need? What's the minimal setup?</p><p><strong>Key files:</strong></p><ul><li><code>manifest.json</code> — The extension's configuration file</li><li><code>background.js</code> — Background script for core logic</li><li><code>popup/</code> — UI that appears when clicking the extension icon</li><li><code>options/</code> — Settings page</li><li><code>icons/</code> — Extension icons (16, 32, 48, 96px)</li></ul><p><strong>Links:</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension">Your first extension</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension">Anatomy of an extension</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json">manifest.json reference</a></li></ul><h2>2. Thinking About Firefox Extensions</h2><p>What can extensions access? What are the boundaries? How does the permission model work?</p><ul><li>Extensions run in an isolated context</li><li>Permissions must be declared in <code>manifest.json</code></li><li>Different script contexts: background scripts, content scripts, popup scripts</li><li>Communication via <code>browser.runtime.sendMessage()</code></li></ul><p><strong>Links:</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API">WebExtensions API overview</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">Permissions</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Background_scripts">Background scripts</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">Content scripts</a></li></ul><h2>3. Available Firefox Extension APIs</h2><p>Which APIs did Embermarks use? Where to find what's available?</p><p><strong>APIs used in Embermarks:</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks"><code>browser.bookmarks</code></a> — Access and traverse bookmarks</li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/history"><code>browser.history</code></a> — Get visit counts and last visit times</li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/storage"><code>browser.storage</code></a> — Store settings and cache</li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime"><code>browser.runtime</code></a> — Message passing between scripts</li></ul><p><strong>Links:</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API">Full API list</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs">Browser support for APIs</a></li></ul><h2>4. Prototyping the Extension</h2><p>How to experiment with APIs? Where to test code before committing?</p><p>The <code>browser.*</code> APIs are only available to extensions, not in regular browser consoles. But you don't need to build anything — just create a folder with two files:</p><p><strong>manifest.json</strong></p><div class="code-block-container"><button class="copy-code-button" aria-label="Copy snippet"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"manifest_version"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span><br>  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Playground"</span><span class="token punctuation">,</span><br>  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0"</span><span class="token punctuation">,</span><br>  <span class="token property">"permissions"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"bookmarks"</span><span class="token punctuation">,</span> <span class="token string">"history"</span><span class="token punctuation">,</span> <span class="token string">"storage"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"background"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"background.js"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token property">"persistent"</span><span class="token operator">:</span> <span class="token boolean">true</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre></div><p><strong>background.js</strong></p><div class="code-block-container"><button class="copy-code-button" aria-label="Copy snippet"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><pre class="language-js"><code class="language-js"><span class="token comment">// Ready to play!</span></code></pre></div><p><strong>To load it:</strong></p><ol><li>Go to <code>about:debugging#/runtime/this-firefox</code></li><li>Click <strong>&quot;Load Temporary Add-on...&quot;</strong></li><li>Select your <code>manifest.json</code> file</li><li>Click <strong>Inspect</strong> → Console tab</li></ol><p>Now you can experiment:</p><div class="code-block-container"><button class="copy-code-button" aria-label="Copy snippet"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><pre class="language-js"><code class="language-js"><span class="token comment">// See your bookmark structure</span><br>browser<span class="token punctuation">.</span>bookmarks<span class="token punctuation">.</span><span class="token function">getTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br><span class="token comment">// Check visit data for a URL</span><br>browser<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">getVisits</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">"https://example.com"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><br><br><span class="token comment">// Get all visits for a URL with timestamps</span><br><span class="token keyword">let</span> visits <span class="token operator">=</span> <span class="token keyword">await</span> browser<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">getVisits</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">"https://github.com"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><br>visits<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>visitTime<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div><div class="info"><code>"persistent": true</code> keeps the background script running. Without it, Firefox unloads the script when idle, and clicking Inspect shows a "Fallback Document" with no API access.</div><p><strong>Links:</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Debugging">Debugging extensions</a></li><li><a href="https://extensionworkshop.com/documentation/develop/debugging/">Extension Debugger</a></li></ul><h2>5. Splitting the Code</h2><p>How to organize the codebase? What goes where?</p><p><strong>Embermarks structure:</strong></p><div class="code-block-container"><button class="copy-code-button" aria-label="Copy snippet"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><pre><code>embermarks/
├── manifest.json
├── background.js        # Core logic, bookmark analysis
├── popup/
│   ├── popup.html       # Popup UI
│   └── popup.js         # Popup interactions
├── options/
│   ├── options.html     # Settings page
│   └── options.js       # Settings logic
├── shared/
│   ├── styles.css       # Shared styles
│   └── ui.js            # Shared UI components
└── icons/
</code></pre></div><h2>6. Communication via Messages</h2><p>Extensions have <strong>separate contexts</strong> that can't directly call each other's functions.</p><p>The <strong>background script</strong> has access to the APIs and runs persistently. The popup and options pages are just HTML/JS that come and go. They communicate via <code>browser.runtime.sendMessage()</code>.</p><p><strong>Sending a message (from popup or options):</strong></p><div class="code-block-container"><button class="copy-code-button" aria-label="Copy snippet"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> settings <span class="token operator">=</span> <span class="token keyword">await</span> browser<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token string">"getSettings"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p><strong>Receiving messages (in background.js):</strong></p><div class="code-block-container"><button class="copy-code-button" aria-label="Copy snippet"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><pre class="language-js"><code class="language-js">browser<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>onMessage<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> sender<span class="token punctuation">,</span> sendResponse</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">switch</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">case</span> <span class="token string">"getSettings"</span><span class="token operator">:</span><br>      <span class="token keyword">return</span> <span class="token function">getSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Return a Promise</span><br>      <br>    <span class="token keyword">case</span> <span class="token string">"saveSettings"</span><span class="token operator">:</span><br>      <span class="token keyword">return</span> <span class="token function">saveSettings</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>settings<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> browser<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>local<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"settings"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token constant">DEFAULT_SETTINGS</span><span class="token punctuation">,</span> <span class="token operator">...</span>result<span class="token punctuation">.</span>settings <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></div><p>The <code>action</code> field is just a convention — you're sending a plain object, so you can structure it however you like. The listener returns a Promise, which resolves back to the sender.</p><p><strong>Links:</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts#communicating_with_background_scripts">Message passing</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime/sendMessage">runtime.sendMessage()</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage">runtime.onMessage</a></li></ul><h2>7. Bundling the Extension</h2><p>How to package it for distribution?</p><p><strong>Using web-ext:</strong></p><div class="code-block-container"><button class="copy-code-button" aria-label="Copy snippet"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><pre class="language-sh"><code class="language-sh"><span class="token operator">></span> <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> web-ext<br><span class="token operator">></span> web-ext build</code></pre></div><p>This creates a <code>.zip</code> file in <code>web-ext-artifacts/</code> ready for submission.</p><p><strong>Links:</strong></p><ul><li><a href="https://extensionworkshop.com/documentation/develop/getting-started-with-web-ext/">web-ext tool</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Package_your_extension_">Packaging your extension</a></li></ul><h2>8. Testing Locally</h2><p>How to load and test the extension during development?</p><p><strong>Two ways to test:</strong></p><ol><li>about:debugging - Load temporary extension</li></ol><ul><li>Go to <code>about:debugging#/runtime/this-firefox</code></li><li>Click &quot;Load Temporary Add-on...&quot;</li><li>Select your <code>manifest.json</code></li></ul><ol start="2"><li>web-ext run - Auto-reload on changes</li></ol><div class="code-block-container"><button class="copy-code-button" aria-label="Copy snippet"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><pre class="language-sh"><code class="language-sh"><span class="token operator">></span> web-ext run</code></pre></div><p><strong>Links:</strong></p><ul><li><a href="https://extensionworkshop.com/documentation/develop/temporary-installation-in-firefox/">Temporary installation in Firefox</a></li><li><a href="https://extensionworkshop.com/documentation/develop/getting-started-with-web-ext/#testing-out-an-extension">web-ext run</a></li></ul><h2>9. Submitting to Firefox Add-ons</h2><p>How to publish? What's the review process?</p><p><strong>Steps:</strong></p><ol><li>Create account at <a href="https://addons.mozilla.org/">addons.mozilla.org</a></li><li>Go to Developer Hub → Submit a New Add-on</li><li>Upload your <code>.zip</code> file</li><li>Fill in listing details (description, screenshots, categories)</li><li>Submit for review</li></ol><p><strong>Links:</strong></p><ul><li><a href="https://extensionworkshop.com/documentation/publish/submitting-an-add-on/">Submitting an add-on</a></li><li><a href="https://extensionworkshop.com/documentation/publish/add-on-policies/">Add-on policies</a></li><li><a href="https://extensionworkshop.com/documentation/publish/what-does-review-rejection-mean-to-users/">Review process</a></li></ul></main><aside class="post__aside"><nav class="post__pagination"><a href="/posts/how-i-browse-the-web-in-2026/"><span>How I browse the web in 2026</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a href="https://github.com/gruberb" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a href="https://www.linkedin.com/in/bastiangruber/" target="_blank" rel="noopener noreferrer">LinkedIn</a></li><li><a href="https://hachyderm.io/@bastian" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a href="https://bsky.app/profile/bastiangruber.bsky.social" target="_blank" rel="noopener noreferrer">Bluesky</a></li><li><a href="https://rustwebdevelopment.com" target="_blank" rel="noopener noreferrer">Book</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><div class="table-of-contents" id="table-of-contents"><h3>Contents</h3><ul class="toc-list" id="toc-list"></ul></div><button class="toc-toggle" id="toc-toggle" aria-label="Toggle table of contents"><svg viewBox="0 0 24 24"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"/></svg></button><script src="/assets/main.d95d19e6dac2bc6e4c51.js"></script><script>const copySvg = `
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
      <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
    </svg>
    `;
    const checkSvg = `
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check-icon lucide-check"><path d="M20 6 9 17l-5-5"/></svg>
    `;

    document.querySelectorAll(".copy-code-button").forEach(btn => {
        // initialize with copy icon
        btn.innerHTML = copySvg;

        btn.addEventListener("click", () => {
            let code = btn.nextElementSibling.querySelector("code");
            if (!code) return;

            navigator.clipboard.writeText(code.innerText).then(() => {
            // swap to check
            btn.innerHTML = checkSvg;

            // back to copy icon after 2s
            setTimeout(() => {
                btn.innerHTML = copySvg;
            }, 2000);
            });
        });
    });</script></body></html>